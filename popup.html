<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GritShot AI - Screenshot Preview + AI Assistant</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="main-container">
      <header>
        <h1 class="title-header">GritShot AI</h1>
        <p class="title-header-desc">Drop Screenshot and Ask AI</p>
      </header>
      <!-- HELPER STEPS -->
      <section class="notes card hidden">
        <h3 class="hint quick-steps">Quick Steps:</h3>
        <ol class="steps">
          <li>
            <b>Take a screenshot</b> by pressing
            <span class="kbd">Win+Shift+S</span> (Windows) or
            <span class="kbd">⌘+Shift+5</span> (macOS).
          </li>
          <li>
            <b>Copy the screenshot</b> to the clipboard by pressing
            <span class="kbd">CTRL+C</span> (Windows) or
            <span class="kbd">⌘+C</span> (macOS).
          </li>
          <li>
            <b>Click GritShot AI</b>, then <b>Paste</b> by pressing
            <span class="kbd">Ctrl+V</span> (Windows) or
            <span class="kbd">⌘+V</span>(macOS)
          </li>
        </ol>
      </section>

      <section class="card tab-container">
          <button data-target="panel-1" class="tab tab-active">
            <img class="prompt-icon" src="./icons/ask_white.svg" alt="prompt">
            <p>Ask AI</p>
          </button>
          <button data-target="panel-2" class="tab">
            <img class="settings-icon" src="./icons/setting.svg" alt="settings">
            <p>Settings</p>
          </button>
      </section>
      
      <section id="panel-1" class="card form prompt view">
        <div class="form-title">
          <img src="./icons/ss.svg" alt="ask"></img>
          <p class="form-title-text">Screenshot and Ask Anything</p>
        </div>
        <div class="dropzone-controls">
          <button id="pasteBtn" class="btn">
            <img src="./icons/paste.svg" alt="Paste from clipboard">
            Paste Clipboard
          </button>
          <button id="clearBtn" class="btn">
            <img src="./icons//clear.svg" alt="clear">
            Clear</button>
        </div>
         <div id="dropZone" class="drop dropzone">
            <div class="dropzone-instructions">
              <p>
                <strong>Drag &amp; drop</strong> an image here,<br>
                or <strong>Paste</strong> from clipboard.
              </p>
              <small class="note">Supports PNG, JPG, and JPEG formats.</small>
            </div>
          </div>
          <img id="preview" alt="Preview"></img>
          <span id="status"></span>
        </div>
        <div class="form">
          <label>Prompt</label>
            <textarea
            id="prompt"
            placeholder="Briefly describe the image and highlight key points."
          ></textarea>
        </div>

        <div style="display: flex; justify-content: flex-end;">
          <button id="analyzeBtn" class="btn-black">
            Send
          </button>
        </div>
      </section>
      

      <!-- SETTINGS -->
      <section id="panel-2" class="card form settings hidden view">
        <div class="form-title">
          <img src="./icons/setting.svg" alt="ask"></img>
          <p class="form-title-text">Settings</p>
        </div>
        <div class="warning-card">
          <p><b>Warning!</b></p>
          <p style="text-align: justify;">Keep your API key secure. It is stored
          locally in your browser's <b>local storage</b>. Do not share it
          with anyone.</p>

            <button class="btn-warning" style="margin-top: 12px;" id="clearApiKeyBtn">
              Clear API Key
            </button>
            <span id="clearApiKeyStatus" style="margin-left:8px; color: #d9534f;"></span>
        </div>
        <div class="form">
          <label>API Key</label>
          <input
            id="apiKeySetting"
            type="password"
            placeholder="sk-..."
            autocomplete="off"
          />
        </div>
        <div class="form">
          <label>Model</label>
          <select id="modelSetting">
            <option value="gpt-4o-mini">gpt-4o-mini (vision)</option>
            <option value="gpt-4o">gpt-4o (vision)</option>
          </select>
        </div>
        <div class="form">
          <label>Default Prompt</label>
            <textarea
            id="promptSetting"
            placeholder="Briefly describe the image and highlight key points."
          ></textarea>
        </div>
        <div style="display: flex; justify-content: flex-end; margin-top: 16px; gap: 8px">
          <button id="saveBtn" class="btn-black">
            Save
          </button>
        </div>
        <span id="statusSetting"></span>
      </section>

      <section id="panel-1" class="card response view">
        <div class="form-title">
          <img src="./icons/ask_active.svg" alt="ask"></img>
          <p class="form-title-text">AI Response</p>
        </div>
        <pre id="answer" class="answer">No request has been made yet.</pre>
      </section>
    </main>
    <script src="popup.js"></script>
  </body>
</html>
